{"version":3,"sources":["assets/img/credit-card.svg","assets/img/shop.svg","assets/img/web-atm.svg","assets/img/visa.svg","assets/img/mastercard.svg","assets/img/jcb.svg","assets/img/back-three.svg","assets/img/finish.svg","actions/type.js","reducers/stepReducer.js","reducers/storeReducer.js","reducers/index.js","reducers/orderReducer.js","reducers/paymentInfoReducer.js","history.js","actions/index.js","components/TitleBar.js","components/List.js","components/OrderInfo.js","components/AsideArea.js","components/StepBar.js","components/MainArea.js","components/Layout.js","components/steps/ChoosePayMethod.js","components/controllers/ErrMsg.js","util.js","components/controllers/Label.js","components/controllers/EmailCtrler.js","components/controllers/ConfirmCheckCtrler.js","components/BtnsToChangeStep.js","components/steps/PayForm.js","components/controllers/InstCtrler.js","components/controllers/CardNumInputChain.js","components/controllers/ShowCardLabels.js","components/controllers/CardNumCtrler.js","components/controllers/ExpirationCtrler.js","components/controllers/SafeCodeCtrler.js","components/steps/PayByCreditCard.js","components/controllers/StoreCtrler.js","components/steps/PayByStore.js","components/controllers/BankCtrler.js","components/steps/PayByATM.js","components/steps/Finish.js","components/steps/FinishStore.js","components/App.js","index.js"],"names":["GET_ORDER","GET_STEPS","SET_CUR_STEP","SET_PAYMENT_INFO","GET_STORES","steps","1","title","default","value","2","3","storeMap","combineReducers","form","formReducer","order","state","action","type","payload","curStep","paymentInfo","stores","createBrowserHistory","basename","setCurStep","step","setPaymentInfo","info","getStores","TitleBar","props","subtitle","className","List","this","items","map","item","content","renderList","Component","OrderInfo","hideList","getOrder","setState","windowWidth","oldProps","length","onClick","connect","AsideArea","getWindowWidth","bind","window","addEventListener","removeEventListener","document","documentElement","offsetWidth","data-side","finish","renderFinish","basicClassName","top","style","renderContent","finishStepIdx","Object","values","findIndex","keys","StepBar","i","bgc","push","data-step","renderSteps","MainArea","mainContentRef","createRef","setTimeout","getMainContentTop","current","getBoundingClientRect","ref","children","Layout","asideTop","matchStep","subType","renderTitle","curPage","substr","split","mainType","idx","ChoosePayMethod","payMethod","onPayMethodClick","method","onNextStepBtnClick","history","img","require","imgClassName","src","alt","match","path","renderPayment","disabled","ErrMsg","small","createElement","el","rootEl","appendChild","removeChild","createPortal","validateEmail","email","status","msg","test","validateCardNum","cardNum","errMsg","Number","isNaN","num","n","flat","reduce","a","e","validateExpiration","expiration","year","month","validateSafeCode","code","renderErrMsg","meta","error","touched","Label","EmailCtrler","input","inputClassName","querySelector","Field","name","component","renderEmail","id","ConfirmCheckCtrler","renderConfirmCheck","BtnsToChangeStep","to","PayByStore","onSubmit","handleSubmit","formWrapped","reduxForm","validate","formValues","join","safeCode","confirmCheck","store","bank","InstallmentCtrler","renderInstallmentCtrler","installment","checked","CardNumInputChain","renderInput","last","maxLength","data-idx","inputRefs","onChange","target","dataset","focus","renderInputChain","chain","4","ShowCardLabels","labels","firstTwoChar","firstThreeChar","firstFourChar","startsWith","label","index","arr","checkCardLabel","data-label","renderLabels","CardNumCtrler","Payment","ExpirationCtrler","renderExpiration","renderSelect","renderOptions","Date","getFullYear","yearOptions","monthOptions","curYear","makeOptions","start","end","options","selectorClassName","data-type","defaultValue","SafeCodeCtrler","renderSafeCode","PayByCreditCard","localStorage","setItem","JSON","stringify","PayForm","initialValues","StoreCtrler","renderStore","entries","data","time","now","ownProps","BankCtrler","renderBank","banks","concat","bankList","Finish","getItem","parse","removeItem","afterAWeek","getTime","toLocaleString","result","App","vh","innerHeight","setProperty","getSteps","historyListen","listen","location","pathname","page","setVh","exact","PayByATM","FinishStore","render","React","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducers","applyMiddleware","ReactDOM"],"mappings":"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","file":"static/js/main.24d5b56f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/credit-card.f2b43023.svg\";","export default __webpack_public_path__ + \"static/media/shop.b209ed75.svg\";","export default __webpack_public_path__ + \"static/media/web-atm.f9f2f539.svg\";","export default __webpack_public_path__ + \"static/media/visa.b2da2220.svg\";","export default __webpack_public_path__ + \"static/media/mastercard.272e180d.svg\";","export default __webpack_public_path__ + \"static/media/jcb.7063081f.svg\";","export default __webpack_public_path__ + \"static/media/back-three.67786388.svg\";","export default __webpack_public_path__ + \"static/media/finish.33305261.svg\";","export const GET_ORDER = 'GET_ORDER';\nexport const GET_STEPS = 'GET_ALL_STEPS';\nexport const SET_CUR_STEP = 'SET_CUR_STEP';\nexport const SET_PAYMENT_INFO = 'SET_PAYMENT_INFO';\nexport const GET_STORES = 'GET_STORES';","import { GET_STEPS, SET_CUR_STEP } from '../actions/type';\n\nconst steps = {\n  1: {\n    title: {\n      default: '選擇付款方式',\n    },\n    value: 'choose-pay-method',\n  },\n  2: {\n    title: {\n      default: '填寫付款資訊',\n    },\n    value: 'fill-in-info',\n  },\n  3: {\n    title: {\n      default: '您的訂單已完成付款！',\n      'convenience-store': '您的訂單已成立！',\n    },\n    value: 'finish',\n  },\n};\n\nexport function stepReducer(state = {}, action) {\n  switch (action.type) {\n    case GET_STEPS:\n      return steps;\n    default:\n      return state;\n  }\n}\n\nexport function curStepReducer(state = 1, action) {\n  switch (action.type) {\n    case SET_CUR_STEP:\n      return action.payload;\n    default:\n      return state;\n  }\n}","import { GET_STORES } from '../actions/type';\n\nconst storeMap = {\n  '7-11': '7-11',\n  'fami-mart': '全家',\n  'hi-life': '萊爾富',\n  'ok-mart': 'OK mart',\n};\n\nexport default function storeReducer(state = {}, action) {\n  switch (action.type) {\n    case GET_STORES :\n      return storeMap;\n    default:\n      return state;\n  }\n}","import { combineReducers } from 'redux';\nimport { reducer as formReducer } from 'redux-form';\nimport orderReducer from './orderReducer';\nimport { stepReducer, curStepReducer } from './stepReducer';\nimport paymentInfoReducer from './paymentInfoReducer';\nimport storeReducer from './storeReducer';\n\nexport default combineReducers({\n    form: formReducer,\n    order: orderReducer,\n    steps: stepReducer,\n    curStep: curStepReducer,\n    paymentInfo: paymentInfoReducer,\n    stores: storeReducer,\n});","import { GET_ORDER } from '../actions/type';\n\nexport default function orderReducer(state = [], action) {\n  switch (action.type) {\n    case GET_ORDER:\n      return action.payload;\n    default:\n      return state;\n  }\n}","import { SET_PAYMENT_INFO } from '../actions/type';\n\nexport default function paymentInfoReducer(state = {}, action) {\n  switch (action.type) {\n    case SET_PAYMENT_INFO:\n      return action.payload;\n    default:\n      return state;\n  }\n}","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory({\n    basename: '/payment',\n});","import {\n\tGET_ORDER,\n\tGET_STEPS,\n\tGET_STORES,\n\tSET_CUR_STEP,\n\tSET_PAYMENT_INFO,\n} from './type';\n\nexport const getOrder = () => {\n  // Fake Data\n  return {\n    type: GET_ORDER,\n    payload: [\n\t\t\t{\n\t\t\t\ttitle: '商品名稱',\n\t\t\t\tcontent: 'Iphone XR 手機殼 x 1',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '訂單編號',\n\t\t\t\tcontent: '17485739',\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '訂單金額',\n\t\t\t\tcontent: 'NT$ 600',\n\t\t\t}\n\t\t],\n  };\n};\n\nexport const getSteps = () => {\n\treturn { type: GET_STEPS };\n};\n\nexport const setCurStep = (step) => {\n\treturn {\n\t\ttype: SET_CUR_STEP,\n\t\tpayload: step,\n\t};\n};\n\nexport const setPaymentInfo = (info) => {\n\treturn {\n\t\ttype: SET_PAYMENT_INFO,\n\t\tpayload: info,\n\t};\n};\n\nexport const getStores = () => {\n\treturn { type: GET_STORES };\n}","export default function TitleBar(props) {\n  const { title, subtitle } = props;\n\n  return (\n    <div className=\"content-title-bar text-center mb-4\">\n      <h2 className=\"content-title d-inline-block fs-4 title-bgc-secondary title-spacing\">\n        {title}\n      </h2>\n\n      {\n        subtitle &&\n        <small className=\"fw-bold d-block\">\n          {subtitle}\n        </small>\n      }\n    </div>\n  );\n}","import { Component } from 'react';\n\nclass List extends Component {\n    renderList() {\n        return this.props.items.map((item) => (\n            <li\n                className=\"list-item mb-0\"\n                key={item.title}\n            >\n                {\n                    item.title && \n                    <p className=\"list-item-title mb-0\">\n                        {item.title}\n                    </p>\n                }\n                <p className=\"list-item-content mb-0\">\n                    {item.content}\n                </p>\n            </li>\n        ));\n    }\n\n    render() {\n        return (\n            <ul className={`list ps-0 mb-0 ${this.props.className || ''}`}>\n                {this.renderList()}\n            </ul>\n        );\n    }\n}\n\nexport default List;","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getOrder } from '../actions';\nimport List from './List';\n\nclass OrderInfo extends Component {\n\tstate = { hideList: null };\n\n\tcomponentDidMount() {\n\t\tthis.props.getOrder();\n\t\tthis.setState({ hideList: this.props.windowWidth < 576 });\n\t}\n\n\tcomponentDidUpdate(oldProps) {\n\t\tif (oldProps.windowWidth !== this.props.windowWidth) {\n\t\t\tthis.setState({ hideList: this.props.windowWidth < 576 });\n\t\t}\n\t}\n\n\trenderList() {\n\t\tif (this.props.order.length < 1) {\n\t\t\treturn null;\n\t\t} \n\t\treturn (\n\t\t\t<List\n\t\t\t\titems={this.props.order}\n\t\t\t\tclassName={`order-info-list p-sm-0 p-3 ${this.state.hideList ? 'hide' : ''}`}\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className={`order-info p-sm-3 rounded-start ${this.props.className || ''}`}>\n\t\t\t\t<h3\n\t\t\t\t\tclassName=\"order-info-title\"\n\t\t\t\t\tonClick={() => this.setState((state) => ({ hideList: !state.hideList }))}\n\t\t\t\t>\n\t\t\t\t\t訂單資訊\n\t\t\t\t</h3>\n\n\t\t\t\t{this.renderList()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn { order: state.order };\n}\n\nexport default connect(\n\tmapStateToProps,\n\t{ getOrder }\n)(OrderInfo);","import { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport OrderInfo from './OrderInfo';\n\nclass AsideArea extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = { windowWidth: 0 };\n\t\tthis.getWindowWidth = this.getWindowWidth.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getWindowWidth();\n\t\twindow.addEventListener('resize', this.getWindowWidth);\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.getWindowWidth);\n\t}\n\n\tgetWindowWidth() {\n\t\tthis.setState({ windowWidth: document.documentElement.offsetWidth });\n\t}\n\n\trenderFinish() {\n\t\tif (this.state.windowWidth < 576) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<p className=\"fs-4 d-inline-block title-spacing text-end me-4\">\n\t\t\t\t\t<span className=\"decoration-item fw-light\" data-side=\"top\">|</span>\n\t\t\t\t\t<span className=\"d-block\">Finish</span>\n\t\t\t\t\t<span className=\"decoration-item fw-light\" data-side=\"bottom\">|</span>\n\t\t\t\t</p>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"decoration-bg-box rounded-start rounded-3 bg-light\"\n\t\t\t\t></div>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trenderContent() {\n\t\tif (!this.props.finish) {\n\t\t\treturn <OrderInfo windowWidth={this.state.windowWidth} />;\n\t\t}\n\t\treturn this.renderFinish();\n\t}\n\n\trender() {\n\t\tconst basicClassName = `aside-area ${this.props.className || ''}`;\n\t\tif (!this.props.top) {\n\t\t\treturn <aside className={basicClassName}></aside>;\n\t\t}\n\t\treturn (\n\t\t\t<aside\n\t\t\t\tclassName={`\n\t\t\t\t\t${basicClassName}\n\t\t\t\t\t${this.props.finish ? ' d-flex justify-content-end' : ''}\n\t\t\t\t`}\n\t\t\t\tstyle={{ top: `${this.props.top}px` }}\n\t\t\t>\n\t\t\t\t{this.renderContent()}\n\t\t\t</aside>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\tconst finishStepIdx = Object.values(state.steps).findIndex((step) => step.value === 'finish');\n\tif (finishStepIdx === -1) {\n\t\treturn { finish: false };\n\t}\n\treturn { finish: state.curStep === +Object.keys(state.steps)[finishStepIdx] };\n}\n\nexport default connect(mapStateToProps)(AsideArea);","import { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass StepBar extends Component {\n\trenderSteps() {\n\t\tconst steps = [];\n\n\t\tfor (let i = 0; i < this.props.steps; i++) {\n\t\t\tconst bgc = i + 1 <= this.props.curStep ? 'bg-secondary' : 'bg-info';\n\t\t\tconst className = `step-bar-item badge rounded-circle p-0 ${bgc}`;\n\n\t\t\tsteps.push(\n\t\t\t\t<li\n\t\t\t\t\tkey={i}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tdata-step={i + 1}\n\t\t\t\t>\n\t\t\t\t\t{i + 1}\n\t\t\t\t</li>\n\t\t\t);\n\t\t}\n\n\t\treturn steps;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<ol\n\t\t\t\tclassName={`step-bar d-flex flex-wrap ps-0 ${this.props.className || ''}`}\n\t\t\t>\n \t\t\t\t{this.renderSteps()}\n \t\t\t</ol>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn {\n\t\tsteps: Object.keys(state.steps).length,\n\t\tcurStep: state.curStep,\n\t};\n}\n\nexport default connect(mapStateToProps)(StepBar);","import { Component, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport StepBar from './StepBar';\n\nclass MainArea extends Component {\n\tmainContentRef = createRef();\n\n\tcomponentDidMount() {\n\t\tsetTimeout(() => this.getMainContentTop(), 0);\n\t}\n\n\tgetMainContentTop() {\n\t\tconst { top } = this.mainContentRef.current.getBoundingClientRect();\n\t\tthis.props.getMainContentTop(top);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<main className={`main-area ${this.props.className || ''}`}>\n\t\t\t\t<StepBar className=\"justify-content-center my-4\" />\n\t\t\t\t<div\n\t\t\t\t\tref={this.mainContentRef}\n\t\t\t\t\tclassName=\"main-content shadow p-4 overflow-scroll flex-grow-1 bg-white\"\n\t\t\t\t>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</div>\n\t\t\t</main>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn { step: state.step };\n}\n\nexport default connect(\n\tmapStateToProps\n)(MainArea);","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setCurStep } from '../actions';\nimport TitleBar from './TitleBar';\nimport AsideArea from './AsideArea';\nimport MainArea from './MainArea';\n\nclass Layout extends Component {\n\tstate = { asideTop: 0 };\n\t\n\tcomponentDidUpdate() {\n\t\tif (!this.props.matchStep) {\n\t\t\tthis.props.setCurStep(this.props.step.step);\n\t\t}\n\t}\n\n\trenderTitle() {\n\t\tconst payMethodMap = {\n\t\t\t'credit-card': '信用卡 / 金融卡',\n\t\t\t'convenience-store': '超商付款',\n\t\t\t'web-atm': 'Web ATM',\n\t\t};\n\n\t\tlet step = `STEP${this.props.step.step}`;\n\t\tlet title = this.props.title.default;\n\t\tlet subtitle = payMethodMap[this.props.subType];\n\n\t\tif (this.props.step.value === 'finish') {\n\t\t\tstep = '';\n\t\t\tsubtitle = null;\n\n\t\t\tif (this.props.subType === 'convenience-store') {\n\t\t\t\ttitle = this.props.title[this.props.subType];\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\t<TitleBar\n\t\t\t\ttitle={`${step}${title}`}\n\t\t\t\tsubtitle={subtitle}\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"outer-container row g-0\">\n\t\t\t\t<AsideArea\n\t\t\t\t\ttop={this.state.asideTop}\n\t\t\t\t\tclassName=\"col-sm-3 align-self-start\"\n\t\t\t\t/>\n\n\t\t\t\t<MainArea\n\t\t\t\t\tgetMainContentTop={(top) => this.setState({ asideTop: top })}\n\t\t\t\t\tclassName=\"col-sm-9 d-flex flex-column\"\n\t\t\t\t>\n\t\t\t\t\t{this.renderTitle()}\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</MainArea>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state, { curPage }) {\n\tconst [mainType, subType] = curPage.substr(1).split('/');\n\tconst idx = Object.values(state.steps).findIndex((step) => step.value === mainType);\n\tconst step = +Object.keys(state.steps)[idx];\n\t\n\treturn {\n\t\tsubType,\n\t\tstep: { step, value: state.steps[step] ? state.steps[step].value : {} },\n\t\ttitle: state.steps[step] ? state.steps[step].title : {},\n\t\tmatchStep: step === state.curStep,\n\t};\n}\n\nexport default connect(\n\tmapStateToProps,\n\t{ setCurStep }\n)(Layout);","import { Component } from 'react';\nimport Layout from '../Layout';\n\nclass ChoosePayMethod extends Component {\n\tstate = {\n\t\tpayMethod: '',\n\t};\n\n\tonPayMethodClick = (method) => {\n\t\tthis.setState({ payMethod: method });\n\t};\n\n\trenderPayment() {\n\t\tconst payMethods = [\n\t\t\t{\n\t\t\t\ttitle: '信用卡/金融卡',\n\t\t\t\tvalue: 'credit-card',\n\t\t\t\timg: require('../../assets/img/credit-card.svg'),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: '超商付款',\n\t\t\t\tvalue: 'convenience-store',\n\t\t\t\timg: require('../../assets/img/shop.svg'),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: 'Web ATM',\n\t\t\t\tvalue: 'web-atm',\n\t\t\t\timg: require('../../assets/img/web-atm.svg'),\n\t\t\t},\n\t\t];\n\n\t\treturn payMethods.map((method) => {\n\t\t\tconst className = `\n\t\t\t\tpay-method-box btn col-5 col-lg-3 mx-2 my-2 my-lg-0\n\t\t\t\t${this.state.payMethod === method.value ? ' btn-primary text-white' : ' btn-light'}\n\t\t\t`;\n\t\t\tconst imgClassName = `\n\t\t\t\tpay-method-img d-block mx-auto\n\t\t\t\t${this.state.payMethod === method.value ? ' light' : ''}\n\t\t\t`;\n\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tkey={method.value}\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tonClick={() => this.onPayMethodClick(method.value)}\n\t\t\t\t>\n\t\t\t\t\t<img\n\t\t\t\t\t\tclassName={imgClassName}\n\t\t\t\t\t\tsrc={method.img.default}\n\t\t\t\t\t\talt={method.value}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<small>\n\t\t\t\t\t\t{method.title}\n\t\t\t\t\t</small>\n\t\t\t\t</div>\n\t\t\t);\n\t\t});\n\t}\n\n\tonNextStepBtnClick = () => {\n\t\tthis.props.history.push(`/fill-in-info/${this.state.payMethod}`);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Layout\n\t\t\t\tcurPage={this.props.match.path}\n\t\t\t>\n\t\t\t\t<div className=\"pay-method-box-container row justify-content-center flex-wrap my-5\">\n\t\t\t\t\t{this.renderPayment()}\n\t\t\t\t</div>\n\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"btn btn-primary text-white ms-auto d-block\"\n\t\t\t\t\tdisabled={!this.state.payMethod}\n\t\t\t\t\tonClick={this.onNextStepBtnClick}\n\t\t\t\t>\n\t\t\t\t\t<small>下一步</small>\n\t\t\t\t</button>\n\t\t\t</Layout>\n\t\t);\n\t}\n}\n\nexport default ChoosePayMethod;","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nclass ErrMsg extends Component {\n  constructor(props) {\n    super(props);\n    const small = document.createElement('small');\n    small.className = 'error-msg text-danger d-block mt-1';\n    this.el = small;\n  }\n\n  componentDidMount() {\n    this.props.rootEl.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    this.props.rootEl.removeChild(this.el);\n  }\n\n  render() {\n    return createPortal(\n      this.props.children,\n      this.el\n    );\n  }\n}\n\nexport default ErrMsg;\n","import ErrMsg from './components/controllers/ErrMsg';\n\nexport function validateEmail(email) {\n\tif (!email) {\n\t\treturn { status: false, msg: '請填寫付款人Email' };\n\t}\n\tconst rule = /^\\w+((-\\w+)|(\\.\\w+))*@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z]+$/;\n\tif (rule.test(email)) {\n\t\treturn { status: true };\n\t}\n\treturn { status: false, msg: '請填寫正確Email' };\n}\n\nexport function validateCardNum(cardNum) {\n\tif (!cardNum) {\n\t\treturn { status: false, msg: '請填寫信用卡號' };\n\t}\n\n\tconst errMsg = { status: false, msg: '請填寫正確信用卡號' };\n\n\tif (cardNum.length < 16 || Number.isNaN(+cardNum)) {\n\t\treturn errMsg;\n\t}\n\n\tconst newCardNum = cardNum.split('').map((num, idx) => (\n\t\t\t(idx + 1) % 2 === 0 ? +num : +num * 2\n\t)).map((num) => (\n\t\t\tnum > 9 ? `${num}`.split('').map((n) => +n) : num\n\t)).flat().reduce((a, e) => a + e, 0);\n\n\tconst result = newCardNum % 10 === 0;\n\n\tif (result) {\n\t\treturn { status: true };\n\t}\n\treturn errMsg;\n}\n\nexport function validateExpiration(expiration) {\n  if (!expiration) {\n    return { status: false, msg: '請選擇有效年月' };\n  }\n  const { year, month } = expiration;\n  if (!year) {\n    return { status: false, msg: '請選擇有效年' };\n  }\n  if (!month) {\n    return { status: false, msg: '請選擇有效月' };\n  }\n  return { status: true };\n}\n\nexport function validateSafeCode(code) {\n  if (!code) {\n    return { status: false, msg: '請填寫背面末三碼' };\n  }\n  if (Number.isNaN(+code) || code.length < 3) {\n    return { status: false, msg: '請填寫正確背面末三碼' };\n  }\n  return { status: true };\n}\n\nexport function renderErrMsg({ meta: { error, touched }, rootEl }) {\n\tif (error && touched) {\n\t\treturn (\n\t\t\t<ErrMsg rootEl={rootEl}>\n\t\t\t\t{error}\n\t\t\t</ErrMsg>\n\t\t);\n\t}\n\treturn null;\n}\n","export default function Label({ children }) {\n  return (\n    <label className=\"form-label d-block\">\n      {children}\n    </label>\n  );\n}","import { Component, Fragment } from 'react';\nimport { Field } from 'redux-form';\nimport { renderErrMsg } from '../../util';\nimport Label from './Label';\n\nclass EmailCtrler extends Component {\n  renderEmail({ input, meta }) {\n    const { error, touched } = meta;\n\t\tconst inputClassName = `form-control ${(error && touched) && 'border-danger'}`;\n\n    return (\n      <Fragment>\n        <input\n          { ...input }\n          type=\"email\"\n          className={inputClassName}\n        />\n        {renderErrMsg({ meta, rootEl: document.querySelector('#email-err') })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className={`email-ctrler ${this.props.className || ''}`}>\n        <Label>填寫付款人Email</Label>\n        <div className=\"col-md-6\">\n          <Field \n            name=\"email\"\n            component={this.renderEmail}\n          />\n        </div>\n        <div id=\"email-err\"></div>\n      </div>\n    );\n  }\n}\n\nexport default EmailCtrler;","import { Component } from 'react';\nimport { Field } from 'redux-form';\nimport { renderErrMsg } from '../../util';\n\nclass ConfirmCheckCtrler extends Component {\n  renderConfirmCheck({ input, meta }) {\n    return (\n      <label className=\"confirm-check d-inline-flex\">\n        <input\n          { ...input }\n          type=\"checkbox\"\n          className=\"form-check-input confirm-check-ctrler me-2 flex-shrink-0\"\n        />\n        <p className=\"form-check-label mb-0\">\n          請再次確認「訂單資訊」與「付款資訊」，付款完成後將發送通知信至您的E-mail信箱\n        </p>\n        {renderErrMsg({ meta, rootEl: document.querySelector('#confirm-check-err') })}\n      </label>\n    );\n  }\n\n  render() {\n    return (\n      <div className={`confirm-check-ctrler ${this.props.className || ''}`}>\n        <Field\n          name=\"confirmCheck\"\n          component={this.renderConfirmCheck} \n        />\n        <div id=\"confirm-check-err\"></div>\n      </div>\n    );\n  }\n}\n\nexport default ConfirmCheckCtrler;\n","import { Link } from 'react-router-dom';\n\nfunction BtnsToChangeStep() {\n\treturn (\n\t\t<div className=\"d-flex justify-content-between\">\n\t\t\t<Link\n\t\t\t\tto=\"/choose-pay-method\"\n\t\t\t\tclassName=\"btn btn-secondary\"\n\t\t\t>\n\t\t\t\t<small>回上一步</small>\n\t\t\t</Link>\n\n\t\t\t<button\n\t\t\t\tclassName=\"btn btn-primary text-white\"\n\t\t\t>\n\t\t\t\t<small>確認付款</small>\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nexport default BtnsToChangeStep;","import { Component } from 'react';\nimport { reduxForm } from 'redux-form';\nimport {\n  validateCardNum,\n  validateExpiration,\n  validateSafeCode,\n  validateEmail,\n} from '../../util';\nimport Layout from '../Layout';\nimport EmailCtrler from '../controllers/EmailCtrler';\nimport ConfirmCheckCtrler from '../controllers/ConfirmCheckCtrler';\nimport BtnsToChangeStep from '../BtnsToChangeStep';\n\nclass PayByStore extends Component {\n  render() {\n    return (\n      <Layout curPage={this.props.path}>\n        <form onSubmit={this.props.handleSubmit(this.props.onSubmit)}>\n          {this.props.children}\n          <EmailCtrler className=\"mb-4\" />\n          <ConfirmCheckCtrler className=\"mb-4\" />\n          <BtnsToChangeStep />\n        </form>\n      </Layout>\n    );\n  }\n}\n\nfunction validate(formValues) {\n  const error = {};\n  const cardNum = formValues.cardNum ? Object.values(formValues.cardNum).join('') : '';\n\n  if (!validateCardNum(cardNum).status) {\n    error.cardNum = validateCardNum(cardNum).msg;\n  }\n\n  if (!validateExpiration(formValues.expiration).status) {\n    error.expiration = validateExpiration(formValues.expiration).msg;\n  }\n\n  if (!validateSafeCode(formValues.safeCode).status) {\n    error.safeCode = validateSafeCode(formValues.safeCode).msg;\n  }\n\n  if (!validateEmail(formValues.email).status) {\n    error.email = validateEmail(formValues.email).msg;\n  }\n  \n  if (!formValues.confirmCheck) {\n    error.confirmCheck = '請勾選';\n  }\n\n  if (!formValues.store) {\n    error.store = '請選擇付款超商';\n  }\n\n  if (!formValues.bank) {\n    error.bank = '請選擇付款銀行';\n  }\n\n  return error;\n}\n\nconst formWrapped = reduxForm({\n  form: 'Payment',\n  validate,\n})(PayByStore);\n\nexport default formWrapped;","import { Component } from 'react';\nimport { Field } from 'redux-form';\n\nclass InstallmentCtrler extends Component {\n  renderInstallmentCtrler = ({ input, installment, className }) => {\n    return (\n      <label className={className || ''}>\n        <input\n          {...input}\n          type=\"radio\"\n          value={installment.value}\n          checked={installment.value === input.value}\n          className=\"me-2 form-check-input\"\n        />\n        {installment.title}\n      </label>\n    );\n  }\n  \n  render() {\n    return (\n      <div className={`installment-ctrler ${this.props.className || ''}`}>\n        <Field\n          name=\"installment\"\n          component={this.renderInstallmentCtrler}\n          installment={{ title: '一次付款', value: 'pay-once' }}\n          className=\"me-3\"\n        />\n        <Field\n          name=\"installment\"\n          component={this.renderInstallmentCtrler}\n          installment={{ title: '分期付款', value: 'installment-plan' }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default InstallmentCtrler;","import { Component, Fragment, createRef } from 'react';\nimport { Field } from 'redux-form';\nimport ErrMsg from './ErrMsg';\n\nclass CardNumInputChain extends Component {\n  constructor(props) {\n    super(props);\n\n    this.inputRefs = [];\n    for (let i = 0; i < 4; i++) {\n      this.inputRefs.push(createRef());\n    }\n\n    this.state = {\n      cardNum: { 1: '', 2: '', 3: '', 4: '' },\n    };\n  }\n\n  renderInput = ({ idx, input, last = false, meta }) => {\n    const onInputChange = (e) => {\n      const idx = +e.target.dataset.idx;\n      if (e.target.value.length > 3) {\n        this.inputRefs[idx + 1 > 3 ? idx : idx + 1].current.focus();\n      }\n      this.setState(\n        (state) => {\n          return {\n            cardNum: { ...state.cardNum, [idx + 1]: e.target.value },\n          };\n        },\n        () => input.onChange(this.state.cardNum)\n      );\n    };\n\n    return (\n      <input\n        maxLength={4}\n        data-idx={idx}\n        className={`\n          form-control\n          ${!last && ' me-2 me-sm-0 px-1 px-sm-2'}\n          ${(meta.error && meta.touched) && ' border-danger'}\n        `}\n        ref={this.inputRefs[idx]}\n        onChange={onInputChange}\n      />\n    );\n  }\n\n  renderInputChain = ({ input, meta }) => {\n    const chain = [];\n\n    for (let i = 0; i < 4; i++) {\n      if (i !== 3) {\n        chain.push(\n          <Fragment key={i}>\n            {this.renderInput({ idx: i, input, last: false, meta })}\n            <span className=\"mx-1 d-none d-sm-block\">—</span>\n          </Fragment>\n        );\n        continue;\n      }\n      chain.push(\n        <Fragment key={i}>\n          {this.renderInput({ idx: i, input, last: true, meta })}\n        </Fragment>\n      );\n    }\n\n    if (meta.error && meta.touched) {\n      chain.push(\n        <ErrMsg\n          key={meta.error}\n          rootEl={document.querySelector('#card-num-err')}\n        >\n          {meta.error}\n        </ErrMsg>\n      );\n    }\n\n    return chain;\n  }\n  \n  render() {\n    return (\n      <div className=\"d-flex align-items-center col-lg-6\">\n        <Field\n          name=\"cardNum\"\n          component={this.renderInputChain}\n        />\n      </div>\n    );\n  }\n}\n\nexport default CardNumInputChain;\n","import { Component } from 'react';\nimport { validateCardNum } from '../../util';\n\nclass ShowCardLabels extends Component {\n  labels = [\n\t\t{\n\t\t\ttitle: 'visa',\n\t\t\timg: require('../../assets/img/visa.svg'),\n\t\t},\n\t\t{\n\t\t\ttitle: 'master-card',\n\t\t\timg: require('../../assets/img/mastercard.svg'),\n\t\t},\n\t\t{\n\t\t\ttitle: 'jcb',\n\t\t\timg: require('../../assets/img/jcb.svg'),\n\t\t}\n\t];\n\n  checkCardLabel(cardNum) {\n\t\tif (!validateCardNum(cardNum).status) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst firstTwoChar = cardNum.substr(0, 2);\n\t\tconst firstThreeChar = cardNum.substr(0, 3);\n\t\tconst firstFourChar = cardNum.substr(0, 4);\n\t\t\n\t\tif (cardNum.startsWith('4')) {\n\t\t\treturn 'visa';\n\t\t}\n\t\tif (+firstTwoChar >= 51 && +firstTwoChar <= 55) {\n\t\t\treturn 'master-card';\n\t\t}\n\t\tif (firstFourChar === '1800' || firstFourChar === '2131' || (+firstThreeChar >= 300 && +firstThreeChar <= 399)) {\n\t\t\treturn 'jcb';\n\t\t}\n\t\treturn false;\n\t}\n\n  renderLabels() {\n    const { cardNum } = this.props;\n\n\t\treturn this.labels.map((label, index, arr) => {\n\t\t\tconst className = `\n        card-label form-control-sketch\n        ${this.checkCardLabel(cardNum) === label.title ? ' light' : ''}\n        ${index !== arr.length - 1 ? ' me-1' : ''}\n      `;\n\t\t\t\n\t\t\treturn (\n\t\t\t\t<img\n\t\t\t\t\tclassName={className}\n\t\t\t\t\tsrc={label.img.default}\n\t\t\t\t\talt={label.title}\n\t\t\t\t\tdata-label={label.title}\n\t\t\t\t\tkey={label.title}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t}\n\n  render() {\n\t\treturn (\n\t\t\t<div className={`card-label-box d-flex ${this.props.className || ''}`}>\n\t\t\t\t{this.renderLabels()}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default ShowCardLabels;","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Label from './Label';\nimport CardNumInputChain from './CardNumInputChain';\nimport ShowCardLabels from './ShowCardLabels';\n\nclass CardNumCtrler extends Component {\n  render() {\n    return (\n      <div className={`card-num-ctrler ${this.props.className || ''}`}>\n        <Label>信用卡號</Label>\n\n        <div className=\"d-flex flex-wrap flex-lg-nowrap align-items-end\">\n          <CardNumInputChain />\n\n          <ShowCardLabels\n            cardNum={this.props.cardNum}\n            className=\"ms-lg-3 mt-lg-0 mt-2\"\n          />\n        </div>\n\n        <div id=\"card-num-err\"></div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  if (!state.form.Payment.values) {\n    return { cardNum: '' };\n  }\n  const { cardNum } = state.form.Payment.values;\n  return { cardNum: Object.values(cardNum).join('') };\n}\n\nexport default connect(mapStateToProps)(CardNumCtrler);","import { Component, Fragment } from 'react';\nimport { Field } from 'redux-form';\nimport { renderErrMsg } from '../../util';\nimport Label from './Label';\n\nclass ExpirationCtrler extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expiration: { year: '', month: '' },\n    };\n    const { yearOptions, monthOptions } = this.renderOptions(new Date().getFullYear());\n    this.yearOptions = yearOptions;\n    this.monthOptions = monthOptions;\n  }\n\n  renderOptions(curYear) {\n\t\tconst makeOptions = ({ start, end }) => {\n\t\t\tlet options = [];\n\t\t\tfor (let i = start; i <= end; i++) {\n\t\t\t\toptions.push({\n\t\t\t\t\ttitle: i,\n\t\t\t\t\tvalue: i,\n\t\t\t\t});\n\t\t\t}\n\t\t\toptions = options.map(({ value, title }) => (\n\t\t\t\t<option key={value} value={value}>\n\t\t\t\t\t{title}\n\t\t\t\t</option>\n\t\t\t));\n\t\t\treturn options;\n\t\t};\n\t\tconst yearOptions = makeOptions(\n\t\t\t{ start: curYear, end: curYear + 10 },\n\t\t);\n\t\tconst monthOptions = makeOptions(\n\t\t\t{ start: 1, end: 12 },\n\t\t);\n\t\t\n\t\treturn { yearOptions, monthOptions };\n\t}\n\n  renderSelect({ input, meta, type }) {\n    const selectorClassName = `\n      form-select\n      ${(meta.error && meta.touched) && ' border-danger'}\n    `;\n    const onSelectChange = (e) => {\n      const { value, dataset: { type } } = e.target;\n      this.setState(\n        (state) => ({ expiration: { ...state.expiration, [type]: value } }),\n        () => input.onChange(this.state.expiration)\n      );\n    };\n    const typeMap = { year: '年', month: '月' };\n\n    return (\n      <select\n        className={selectorClassName}\n        onChange={onSelectChange}\n        data-type={type}\n        defaultValue=\"placeholder\"\n      >\n        <option value=\"placeholder\" disabled>\n          {`選擇${typeMap[type]}`}\n        </option>\n        {this[`${type}Options`]}\n      </select>\n    );\n  }\n\n  renderExpiration = ({ input, meta }) => {\n\t\treturn (\n      <Fragment>\n        {this.renderSelect({ input, meta, type: 'year' })}\n\n        <span className=\"mx-2\">/</span>\n\n        {this.renderSelect({ input, meta, type: 'month' })}\n        \n        {renderErrMsg({ meta, rootEl: document.querySelector('#expiration-err') })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className={`expiration-date-ctrler ${this.props.className || ''}`}>\n        <Label>有效年月</Label>\n\n        <div className=\"col-md-6 d-inline-flex align-items-center\">\n          <Field\n            name=\"expiration\"\n            component={this.renderExpiration}\n          />\n        </div>\n\n        <div id=\"expiration-err\"></div>\n      </div>\n    );\n  }\n}\n\nexport default ExpirationCtrler;","import { Component, Fragment } from 'react';\nimport { Field } from 'redux-form';\nimport { renderErrMsg } from '../../util';\nimport Label from './Label';\n\nclass SafeCodeCtrler extends Component {\n  renderSafeCode = ({ input, meta }) => {\n    const inputClassName = `\n      form-control\n      ${(meta.error && meta.touched) && ' border-danger'}\n    `;\n\n    return (\n      <Fragment>\n        <input\n          {...input}\n          className={inputClassName}\n          maxLength=\"3\"\n        />\n        <img\n          src={require('../../assets/img/back-three.svg').default}\n          alt=\"背面末三碼\"\n          className=\"save-code-img form-control-sketch ms-3\"\n        />\n        {renderErrMsg({ meta, rootEl: document.querySelector('#safe-code-err') })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className={`safe-code-ctrler ${this.props.className || ''}`}>\n        <Label>背面末三碼</Label>\n        <div className=\"col-lg-3 d-inline-flex align-items-end\">\n          <Field\n            name=\"safeCode\"\n            component={this.renderSafeCode}\n          />\n        </div>\n        <div id=\"safe-code-err\"></div>\n      </div>\n    );\n  }\n}\n\nexport default SafeCodeCtrler;\n\n","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setPaymentInfo } from '../../actions';\nimport PayForm from './PayForm';\nimport InstallmentCtrler from '../controllers/InstCtrler';\nimport CardNumCtrler from '../controllers/CardNumCtrler';\nimport ExpirationCtrler from '../controllers/ExpirationCtrler';\nimport SafeCodeCtrler from '../controllers/SafeCodeCtrler';\n\nclass PayByCreditCard extends Component {\n  onSubmit = (formValues) => {\n    this.props.setPaymentInfo(formValues);\n    localStorage.setItem('payment-info', JSON.stringify(formValues));\n    this.props.history.push('/finish');\n  }\n\n  render() {\n    return (\n      <PayForm\n        path={this.props.match.path}\n        initialValues={{\n\t\t\t\t\tinstallment: 'pay-once',\n\t\t\t\t\tcardNum: { 1: '', 2: '', 3: '', 4: '' },\n\t\t\t\t}}\n        onSubmit={this.onSubmit}\n      >\n        <InstallmentCtrler className=\"mb-4\" />\n        <CardNumCtrler className=\"mb-4\" />\n        <ExpirationCtrler className=\"mb-4\" />\n        <SafeCodeCtrler className=\"mb-4\" />\n      </PayForm>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setPaymentInfo }\n)(PayByCreditCard);","import { Component, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { Field } from 'redux-form';\nimport { getStores } from '../../actions';\nimport { renderErrMsg } from '../../util';\nimport Label from './Label';\n\nclass StoreCtrler extends Component {\n  componentDidMount() {\n    this.props.getStores();\n  }\n\n  renderOptions(stores) {\n    const options = [{ value: 'placeholder', title: '選擇商店' }, ...stores];\n    return options.map((store) => (\n      <option\n        key={store.value}\n        value={store.value}\n        disabled={store.value === 'placeholder'}\n      >\n        {store.title}\n      </option>\n    ));\n  }\n\n  renderStore = ({ input, meta, stores }) => {\n    const { error, touched } = meta;\n    const onSelectChange = (e) => {\n      const { value } = e.target;\n      input.onChange(value);\n    };\n\n    return (\n      <Fragment>\n        <select\n          defaultValue=\"placeholder\"\n          onChange={onSelectChange}\n          className={`form-select ${(error && touched) && 'border-danger'}`}\n        >\n          {this.renderOptions(stores)}\n        </select>\n        {renderErrMsg({ meta, rootEl: document.querySelector('#store-err') })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className={`select-store-ctrler ${this.props.className || ''}`}>\n        <Label>付款超商</Label>\n        <div className=\"col-md-6\">\n          <Field\n            name=\"store\"\n            component={this.renderStore}\n            stores={this.props.stores}\n          />\n        </div>\n        <div id=\"store-err\"></div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  let stores = Object.entries(state.stores);\n\n  if (stores.length < 1) {\n    return { stores: [] };\n  }\n\n  stores = stores.map(([key, val]) => ({ value: key, title: val }));\n  return { stores };\n}\n\nexport default connect(\n  mapStateToProps,\n  { getStores }\n)(StoreCtrler);","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setPaymentInfo } from '../../actions';\nimport PayForm from './PayForm';\nimport StoreCtrler from '../controllers/StoreCtrler';\n\nclass PayByCreditCard extends Component {\n  onSubmit = (formValues) => {\n    const target = `/finish${this.props.type === 'convenience-store' ? '/convenience-store' : ''}`;\n    const data = { ...formValues, time: Date.now() };\n    this.props.setPaymentInfo(data);\n    localStorage.setItem('payment-info', JSON.stringify(data));\n    this.props.history.push(target);\n  }\n\n  render() {\n    return (\n      <PayForm\n        path={this.props.match.path}\n        onSubmit={this.onSubmit}\n      >\n        <StoreCtrler className=\"mb-4\" />\n      </PayForm>\n    );\n  }\n}\n\nfunction mapStateToProps(state, ownProps) {\n  const [,type] = ownProps.match.path.substr(1).split('/');\n  return { type };\n}\n\nexport default connect(\n  mapStateToProps,\n  { setPaymentInfo }\n)(PayByCreditCard);","import { Component, Fragment } from 'react';\nimport { Field } from 'redux-form';\nimport { renderErrMsg } from '../../util';\nimport bankList from '../../assets/bankList.json';\nimport Label from './Label';\n\nclass BankCtrler extends Component {\n  renderOptions() {\n    let banks = [ { code: 'placeholder', name: '選擇銀行' } ];\n    banks = banks.concat(Object.values(bankList).flat());\n\n    return banks.map((bank) => (\n      <option key={bank.code} value={bank.code} disabled={bank.code === 'placeholder'}>\n        {`${bank.code === 'placeholder' ? '' : bank.code} ${bank.name}`}\n      </option>\n    ));\n  }\n\n  renderBank = ({ input, meta }) => {\n    const { error, touched } = meta;\n    const onSelectChange = (e) => {\n      const { value } = e.target;\n      input.onChange(value);\n    };\n\n    return (\n      <Fragment>\n        <select\n          defaultValue=\"placeholder\"\n          onChange={onSelectChange}\n          className={`form-select ${(error && touched) && 'border-danger'}`}\n        >\n          {this.renderOptions()}\n        </select>\n        {renderErrMsg({ meta, rootEl: document.querySelector('#bank-err') })}\n      </Fragment>\n    );\n  }\n\n  render() {\n    return (\n      <div className={`select-bank-ctrler ${this.props.className || ''}`}>\n        <Label>付款銀行</Label>\n        <div className=\"col-md-6\">\n          <Field\n            name=\"bank\"\n            component={this.renderBank}\n          />\n        </div>\n        <div id=\"bank-err\"></div>\n        <ol className=\"mt-4 ps-4\">\n          <li>\n            請準備晶片金融卡＋晶片讀卡機，我們將引導您至指定金融機構之網路ATM進行交易手續。\n          </li>\n          <li>\n            持對應機構之金融卡可享免跨行轉帳手續費，若無以上金融機構發行之金融卡，可自由選擇其一金融機構進行後續交易流程。\n          </li>\n        </ol>\n      </div>\n    );\n  }\n}\n\nexport default BankCtrler;","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { setPaymentInfo } from '../../actions';\nimport PayForm from './PayForm';\nimport BankCtrler from '../controllers/BankCtrler';\n\nclass PayByCreditCard extends Component {\n  onSubmit = (formValues) => {\n    this.props.setPaymentInfo(formValues);\n    localStorage.setItem('payment-info', JSON.stringify(formValues));\n    this.props.history.push('/finish');\n  }\n\n  render() {\n    return (\n      <PayForm\n        path={this.props.match.path}\n        onSubmit={this.onSubmit}\n      >\n        <BankCtrler className=\"mb-4\" />\n      </PayForm>\n    );\n  }\n}\n\nexport default connect(\n  null,\n  { setPaymentInfo }\n)(PayByCreditCard);","import { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { setPaymentInfo } from '../../actions';\nimport Layout from '../Layout';\n \nclass Finish extends Component {\n  componentDidMount() {\n    if (Object.entries(this.props.paymentInfo).length < 1 && localStorage.getItem('payment-info')) {\n      this.props.setPaymentInfo(\n        JSON.parse(localStorage.getItem('payment-info'))\n      );\n    }\n  }\n\n  componentWillUnmount() {\n\t\tif (localStorage.getItem('payment-info')) {\n\t\t\tlocalStorage.removeItem('payment-info');\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n      <Layout curPage={this.props.match.path}>\n        <div className=\"text-center\">\n          <div className=\"show-finish-img-box mb-4\">\n            <img\n              className=\"show-finish-img\"\n              src={require('../../assets/img/finish.svg').default}\n              alt=\"payment finished\"\n            />\n          </div>\n          \n          <p className=\"mb-4\">\n            稍後將寄送訂單詳細資訊至您的E-mail\n          </p>\n\n          <Link\n            className=\"btn btn-primary text-white\"\n            to=\"/choose-pay-method\"\n          >\n            <small>返回首頁</small>\n          </Link>\n        </div>\n      </Layout>\n\t\t);\n\t}\n} \n\nfunction mapStateToProps(state) {\n  return { paymentInfo: state.paymentInfo };\n}\n\nexport default connect(\n  mapStateToProps,\n  { setPaymentInfo }\n)(Finish);","import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { getStores, setPaymentInfo } from '../../actions';\nimport Layout from '../Layout';\nimport List from '../List';\n \nclass Finish extends Component {\n  componentDidMount() {\n    this.props.getStores();\n    if (Object.entries(this.props.paymentInfo).length < 1 && localStorage.getItem('payment-info')) {\n      this.props.setPaymentInfo(\n        JSON.parse(localStorage.getItem('payment-info'))\n      );\n    }\n  }\n\n  componentWillUnmount() {\n\t\tif (localStorage.getItem('payment-info')) {\n\t\t\tlocalStorage.removeItem('payment-info');\n\t\t}\n\t}\n\n  renderList() {\n    if (!this.props.paymentInfo.time) {\n      return [];\n    }\n    const now = new Date(this.props.paymentInfo.time);\n    const afterAWeek = new Date(now.getTime() + 1000 * 60 * 60 * 24 * 7);\n    return [\n      { title: '付款超商', content: this.props.store },\n      { title: '付款代碼', content: now.getTime() },\n      { title: '付款期限', content: afterAWeek.toLocaleString() },\n    ];\n  }\n\n\trender() {\n\t\treturn (\n      <Layout curPage={this.props.match.path}>\n        <List\n          className=\"show-store-finish-list mb-4\"\n          items={this.renderList()}\n        />\n\n        <small className=\"d-flex mb-4\">\n          <span className=\"flex-shrink-0 me-1\">*</span>\n          <span>請至您選擇之超商店內機台輸入代碼進行繳費，逾期訂單自動作廢。</span>\n        </small>\n\n        <Link\n          className=\"btn btn-primary text-white float-end\"\n          to=\"/choose-pay-method\"\n        >\n          <small>返回首頁</small>\n        </Link>\n      </Layout>\n\t\t);\n\t}\n} \n\nfunction mapStateToProps(state) {\n  const result = { store: '', paymentInfo: state.paymentInfo };\n  if (Object.entries(state.paymentInfo).length < 1 || Object.entries(state.stores).length < 1) {\n    return result;\n  }\n  return { ...result, store: state.stores[state.paymentInfo.store] };\n}\n\nexport default connect(\n  mapStateToProps,\n  { getStores, setPaymentInfo }\n)(Finish);","import React from 'react';\nimport { Router, Route, Switch, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport history from '../history';\nimport { getSteps, setCurStep } from '../actions';\nimport ChoosePayMethod from './steps/ChoosePayMethod';\nimport PayByCreditCard from './steps/PayByCreditCard';\nimport PayByStore from './steps/PayByStore';\nimport PayByATM from './steps/PayByATM';\nimport Finish from './steps/Finish';\nimport FinishStore from './steps/FinishStore';\nimport '../styles/all.scss';\n\nclass App extends React.Component {\n\tsetVh() {\n\t\tconst vh = window.innerHeight * 0.01;\n\t\tdocument.documentElement.style.setProperty(\"--vh\", `${vh}px`);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.props.getSteps();\n\t\tthis.historyListen = history.listen((location) => {\n\t\t\tconst [page] = location.pathname.substr(1).split('/');\n\t\t\tconst idx = Object.values(this.props.steps).findIndex((step) => step.value === page);\n\t\t\tconst step = Object.keys(this.props.steps)[idx];\n\t\t\tthis.props.setCurStep(+step);\n\t\t});\n\n\t\tthis.setVh();\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Router history={history}>\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/choose-pay-method\" exact\n\t\t\t\t\t\tcomponent={ChoosePayMethod}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/fill-in-info/credit-card\" exact\n\t\t\t\t\t\tcomponent={PayByCreditCard}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/fill-in-info/convenience-store\" exact\n\t\t\t\t\t\tcomponent={PayByStore}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/fill-in-info/web-atm\" exact\n\t\t\t\t\t\tcomponent={PayByATM}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/finish\" exact\n\t\t\t\t\t\tcomponent={Finish}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route\n\t\t\t\t\t\tpath=\"/finish/convenience-store\" exact\n\t\t\t\t\t\tcomponent={FinishStore}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Route render={() => <Redirect to=\"/choose-pay-method\" />}/>\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t);\n\t}\n}\n\nfunction mapStateToProps(state) {\n\treturn { steps: state.steps };\n}\n\nexport default connect(\n\tmapStateToProps,\n\t{ getSteps, setCurStep }\n)(App);","import ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { Provider } from 'react-redux';\nimport reducers from './reducers';\nimport App from './components/App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nconst store = createStore(\n    reducers,\n    composeEnhancers(applyMiddleware()),\n);\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>,\n    document.querySelector('#root')\n);"],"sourceRoot":""}